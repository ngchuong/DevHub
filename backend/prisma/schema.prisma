// prisma/schema.prisma
generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id             String      @id @default(cuid())
  username       String      @unique
  email          String      @unique
  password       String
  avatarUrl      String?
  bio            String?
  location       String?
  githubUrl      String?
  linkedinUrl    String?
  websiteUrl     String?
  createdAt      DateTime    @default(now())
  updatedAt      DateTime    @updatedAt
  projects       Project[]
  bookmarks      Bookmark[]
  followers      Follow[]    @relation("followers")
  following      Follow[]    @relation("following")
  comments       Comment[]
}

model Project {
  id             String      @id @default(cuid())
  title          String
  description    String
  thumbnailUrl   String?
  githubUrl      String?
  demoUrl        String?
  techStack      String[]
  createdAt      DateTime    @default(now())
  updatedAt      DateTime    @updatedAt
  author         User        @relation(fields: [authorId], references: [id])
  authorId       String
  comments       Comment[]
  bookmarks      Bookmark[]
}

model Comment {
  id          String   @id @default(cuid())
  content     String
  createdAt   DateTime @default(now())
  author      User     @relation(fields: [authorId], references: [id])
  authorId    String
  project     Project  @relation(fields: [projectId], references: [id])
  projectId   String
}

model Bookmark {
  id          String   @id @default(cuid())
  createdAt   DateTime @default(now())
  user        User     @relation(fields: [userId], references: [id])
  userId      String
  project     Project  @relation(fields: [projectId], references: [id])
  projectId   String
}

model Follow {
  id           String   @id @default(cuid())
  follower     User     @relation("following", fields: [followerId], references: [id])
  followerId   String
  following    User     @relation("followers", fields: [followingId], references: [id])
  followingId  String
  createdAt    DateTime @default(now())
}
